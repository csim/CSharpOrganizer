"use strict";var v=Object.create;var d=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var C=(o,e)=>{for(var s in e)d(o,s,{get:e[s],enumerable:!0})},w=(o,e,s,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of u(e))!y.call(o,i)&&i!==s&&d(o,i,{get:()=>e[i],enumerable:!(a=h(e,i))||a.enumerable});return o};var E=(o,e,s)=>(s=o!=null?v(g(o)):{},w(e||!o||!o.__esModule?d(s,"default",{value:o,enumerable:!0}):s,o)),z=o=>w(d({},"__esModule",{value:!0}),o);var M={};C(M,{activate:()=>b,deactivate:()=>x});module.exports=z(M);var r=E(require("vscode")),p=require("child_process"),n,t;function b(o){n=r.commands.registerCommand("csharply.organize.file",async()=>{let e=r.window.activeTextEditor;if(!e){r.window.showErrorMessage("No active file to organize");return}let s=e.document.uri.fsPath;if(s.endsWith(".cs")){if(e.document.isDirty)try{await e.document.save()}catch(a){r.window.showErrorMessage(`Failed to save file: ${a}`);return}await m(s,!1)}}),t=r.commands.registerCommand("csharply.organize.folder",async()=>{let e=r.workspace.workspaceFolders;if(!e||e.length===0){r.window.showErrorMessage("CSharply: No workspace(s) available.");return}for(let s of e)await m(s.uri.fsPath,!0)}),o.subscriptions.push(n),o.subscriptions.push(t)}async function m(o,e){let s=`csharply.exe organize "${o}"`;return new Promise((a,i)=>{(0,p.exec)(s,async(c,f,l)=>{if(c){r.window.showErrorMessage(`CSharply error: ${c.message}`),i(c);return}l&&r.window.showWarningMessage(`CSharply error: ${l}`),e&&r.window.showInformationMessage(f?`CSharply: ${f.trim()}`:"CSharply: Done."),a()})})}function x(){n&&(n.dispose(),n=void 0),t&&(t.dispose(),t=void 0)}0&&(module.exports={activate,deactivate});
